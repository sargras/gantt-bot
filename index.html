<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>全平台甘特图语音助手</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/frappe-gantt@0.6.1/dist/frappe-gantt.css">
</head>
<body>
    <div class="container">
        <!-- 头部 -->
        <header class="header">
            <h1>🗓️ 智能甘特图助手</h1>
            <p class="subtitle">全平台支持 · 语音控制 · 实时编辑</p>
            <div class="platform-indicator" id="platformIndicator"></div>
        </header>

        <!-- 甘特图区域 -->
        <section class="gantt-section">
            <div class="section-header">
                <h2 id="projectTitle">📊 项目甘特图</h2>
                <div class="gantt-controls">
                    <button class="control-btn" onclick="changeViewMode('Day')">日视图</button>
                    <button class="control-btn" onclick="changeViewMode('Week')">周视图</button>
                    <button class="control-btn" onclick="changeViewMode('Month')">月视图</button>
                    <button class="control-btn" onclick="exportData()">💾 导出</button>
                </div>
            </div>
            <div id="gantt-container" class="gantt-container">
                <div class="placeholder">
                    <div class="placeholder-icon">📈</div>
                    <div class="placeholder-text">等待生成甘特图</div>
                    <div class="placeholder-hint">使用语音或文本输入项目计划</div>
                </div>
            </div>
        </section>

        <!-- 输入控制区域 -->
        <section class="control-section">
            <div class="section-header">
                <h2>🎤 输入控制</h2>
                <div class="input-methods">
                    <button class="method-btn active" data-method="voice">语音输入</button>
                    <button class="method-btn" data-method="text">文本输入</button>
                </div>
            </div>

            <!-- 语音输入区域 -->
            <div class="input-area voice-area active">
                <div class="voice-controls">
                    <button id="voiceButton" class="voice-btn" onclick="toggleVoiceRecognition()">
                        <span class="voice-icon">🎤</span>
                        <span id="voiceText">点击开始语音输入</span>
                    </button>
                    <div class="voice-status">
                        <span id="voiceStatus">准备就绪</span>
                        <span class="recording-dot" id="recordingDot"></span>
                    </div>
                </div>
                
                <div class="device-specific-guide" id="deviceGuide">
                    <!-- 设备特定指南会动态显示 -->
                </div>
            </div>

            <!-- 文本输入区域 -->
            <div class="input-area text-area">
                <textarea id="textInput" placeholder="请输入项目计划指令...&#10;例如：创建网站项目，三周时间，第一周需求分析，第二周设计，第三周开发测试"></textarea>
            </div>

            <!-- 操作按钮 -->
            <div class="action-buttons">
                <button class="btn-primary" onclick="processInput()">🚀 生成/更新甘特图</button>
                <button class="btn-secondary" onclick="clearAll()">🗑️ 清空重来</button>
                <button class="btn-tertiary" onclick="showExamples()">📚 指令示例</button>
            </div>
        </section>

        <!-- 示例面板 -->
        <div class="examples-panel" id="examplesPanel">
            <div class="panel-header">
                <h3>💡 指令示例库</h3>
                <button class="close-btn" onclick="hideExamples()">×</button>
            </div>
            <div class="examples-grid">
                <div class="example-category">
                    <h4>📋 创建项目</h4>
                    <div class="example-item" onclick="loadExample(0)">创建网站开发项目，三周时间</div>
                    <div class="example-item" onclick="loadExample(1)">新产品发布计划，共15天完成</div>
                    <div class="example-item" onclick="loadExample(2)">营销活动策划，10天时间</div>
                </div>
                <div class="example-category">
                    <h4>✏️ 编辑任务</h4>
                    <div class="example-item" onclick="loadExample(3)">把开发时间延长到10天</div>
                    <div class="example-item" onclick="loadExample(4)">添加技术评审任务，需要2天</div>
                    <div class="example-item" onclick="loadExample(5)">调整测试阶段为5天时间</div>
                </div>
                <div class="example-category">
                    <h4>⏱️ 时间设置</h4>
                    <div class="example-item" onclick="loadExample(6)">项目下周一开始，工期20天</div>
                    <div class="example-item" onclick="loadExample(7)">明天开始项目，第一周规划，第二周执行</div>
                    <div class="example-item" onclick="loadExample(8)">设置项目从2024年1月1日开始</div>
                </div>
            </div>
        </div>

        <!-- 消息提示 -->
        <div id="messageToast" class="toast"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/frappe-gantt@0.6.1/dist/frappe-gantt.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
